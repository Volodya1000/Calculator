<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Calculator.Avalonia.ViewModels"
        x:Class="Calculator.Avalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Calculator.Avalonia"
        Width="400"
        Height="600"
        Icon="/Assets/avalonia-logo.ico">

  <Window.Styles>
    <Style Selector="Window">
      <Setter Property="MinWidth" Value="400"/>
      <Setter Property="MinHeight" Value="600"/>
      <Setter Property="MaxWidth" Value="400"/>
      <Setter Property="MaxHeight" Value="600"/>
    </Style>
    <!-- Базовый стиль для всех кнопок -->
    <Style Selector="Button">
      <Setter Property="Margin" Value="2"/>
      <Setter Property="Padding" Value="0"/>
      <Setter Property="FontSize" Value="18"/>
      <Setter Property="HorizontalContentAlignment" Value="Center"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
      <Setter Property="Background" Value="#2196F3"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="HorizontalAlignment" Value="Stretch"/>
      <Setter Property="VerticalAlignment" Value="Stretch"/>
    </Style>
  </Window.Styles>

    <Design.DataContext>
    <vm:MainWindowViewModel />
  </Design.DataContext>

  <Grid RowDefinitions="auto, auto, *">
    <!-- Меню -->
    <Menu Grid.Row="0">
      <MenuItem Header="File">
        <MenuItem Header="Exit" Command="{Binding ExitCommand}"/>
      </MenuItem>
    </Menu>

    <!-- Дисплей -->
    <Grid Grid.Row="1" RowDefinitions="auto,auto" Margin="10">
      <TextBlock Grid.Row="0"
                 Text="{Binding ExpressionBuffer}"
                 TextAlignment="Right"
                 FontSize="20"
                 Foreground="#aaa"/>
      <TextBlock Grid.Row="1"
                 Text="{Binding ShownValue}"
                 TextAlignment="Right"
                 FontSize="30"/>
    </Grid>

    <!-- Кнопки калькулятора -->
    <UniformGrid Grid.Row="2" Columns="5" Margin="10">
      <!-- ROW 0 -->
      <Button Content="AC" Command="{Binding ClearCommand}"/>
      <Button Content="RAD" Command="{Binding ToggleDegRadCommand}"/>
      <Button Content="(" Command="{Binding AddParenthesisCommand}" CommandParameter="("/>
      <Button Content=")" Command="{Binding AddParenthesisCommand}" CommandParameter=")"/>
      <Button Content="⌫" Command="{Binding RemoveLastNumberCommand}"/>

      <!-- ROW 1 -->
      <Button Content="e" Command="{Binding AddConstantCommand}" CommandParameter="e"/>
      <Button Content="log" Command="{Binding AddFunctionCommand}" CommandParameter="log"/>
      <Button Content="sin" Command="{Binding AddFunctionCommand}" CommandParameter="sin"/>
      <Button Content="cos" Command="{Binding AddFunctionCommand}" CommandParameter="cos"/>
      <Button Content="tan" Command="{Binding AddFunctionCommand}" CommandParameter="tan"/>

      <!-- ROW 2 -->
      <Button Content="1/x" Command="{Binding ExecuteOperation}" CommandParameter="1/x"/>
      <Button Content="π" Command="{Binding AddConstantCommand}" CommandParameter="π"/>
      <Button Content="+/−" Command="{Binding ToggleSignCommand}"/>
      <Button Content="%" Command="{Binding ExecuteOperation}" CommandParameter="%"/>
      <Button Content="÷" Command="{Binding AddOperationCommand}" CommandParameter="/" />

      <!-- ROW 3 -->
      <Button Content="√x" Command="{Binding ExecuteOperation}" CommandParameter="sqrt"/>
      <Button Content="7" Command="{Binding AddNumberCommand}" CommandParameter="7"/>
      <Button Content="8" Command="{Binding AddNumberCommand}" CommandParameter="8"/>
      <Button Content="9" Command="{Binding AddNumberCommand}" CommandParameter="9"/>
      <Button Content="×" Command="{Binding AddOperationCommand}" CommandParameter="*" />

      <!-- ROW 4 -->
      <Button Content="x!" Command="{Binding ExecuteOperation}" CommandParameter="fact"/>
      <Button Content="4" Command="{Binding AddNumberCommand}" CommandParameter="4"/>
      <Button Content="5" Command="{Binding AddNumberCommand}" CommandParameter="5"/>
      <Button Content="6" Command="{Binding AddNumberCommand}" CommandParameter="6"/>
      <Button Content="−" Command="{Binding AddOperationCommand}" CommandParameter="-" />

      <!-- ROW 5 -->
      <Button Content="xʸ" Command="{Binding ExecuteOperation}" CommandParameter="^"/>
      <Button Content="1" Command="{Binding AddNumberCommand}" CommandParameter="1"/>
      <Button Content="2" Command="{Binding AddNumberCommand}" CommandParameter="2"/>
      <Button Content="3" Command="{Binding AddNumberCommand}" CommandParameter="3"/>
      <Button Content="+" Command="{Binding AddOperationCommand}" CommandParameter="+" />

      <!-- ROW 6 -->
      <Button Content="x²" Command="{Binding ExecuteOperation}" CommandParameter="^2"/>
      <Button Content="00" Command="{Binding AddNumberCommand}" CommandParameter="00"/>
      <Button Content="." Command="{Binding AddDecimalPointCommand}"/>
      <Button Content="0" Command="{Binding AddNumberCommand}" CommandParameter="0"/>
      <Button Content="=" Command="{Binding ExecuteOperation}" CommandParameter="="/>
    </UniformGrid>
  </Grid>
</Window>